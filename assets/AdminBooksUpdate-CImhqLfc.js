import{g as c,r as m,o as y,c as n,a as o,f as k,h as g,w as r,v as a,i as U,j as w,b as x,e as i,k as V}from"./index-wNGv4PtD.js";const N={class:"container mt-5"},T={key:0,class:"alert alert-info"},j={class:"mb-3"},E={class:"mb-3"},B={class:"row"},C={class:"col-md-6 mb-3"},M={class:"col-md-6 mb-3"},h={class:"mb-3"},A={class:"mb-3"},L={class:"mb-3"},I={__name:"AdminBooksUpdate",setup(R){const p=c(),v=x(),u=p.params.id,l=m(null),d=m(!0);y(async()=>{try{const s=await fetch(`http://localhost:3000/books/${u}`);l.value=await s.json()}catch(s){console.error("Erreur de chargement du livre :",s),alert("Impossible de charger les données du livre")}finally{d.value=!1}});const b=async()=>{try{if(!(await fetch(`http://localhost:3000/books/${u}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(l.value)})).ok)throw new Error("Erreur lors de la mise à jour");alert("Livre mis à jour avec succès"),v.push("/admin/books")}catch(s){console.error("Erreur de mise à jour :",s),alert("Échec de la mise à jour du livre")}};return(s,e)=>{const f=w("router-link");return i(),n("div",N,[e[16]||(e[16]=o("h2",null,"✏️ Modifier un livre",-1)),d.value?(i(),n("div",T,"Chargement du livre...")):(i(),n("form",{key:1,onSubmit:k(b,["prevent"]),class:"mt-4"},[o("div",j,[e[7]||(e[7]=o("label",{class:"form-label"},"Titre",-1)),r(o("input",{"onUpdate:modelValue":e[0]||(e[0]=t=>l.value.title=t),type:"text",class:"form-control",required:""},null,512),[[a,l.value.title]])]),o("div",E,[e[8]||(e[8]=o("label",{class:"form-label"},"Titre original",-1)),r(o("input",{"onUpdate:modelValue":e[1]||(e[1]=t=>l.value.originalTitle=t),type:"text",class:"form-control"},null,512),[[a,l.value.originalTitle]])]),o("div",B,[o("div",C,[e[9]||(e[9]=o("label",{class:"form-label"},"Prénom de l’auteur",-1)),r(o("input",{"onUpdate:modelValue":e[2]||(e[2]=t=>l.value.author.firstName=t),type:"text",class:"form-control"},null,512),[[a,l.value.author.firstName]])]),o("div",M,[e[10]||(e[10]=o("label",{class:"form-label"},"Nom de l’auteur",-1)),r(o("input",{"onUpdate:modelValue":e[3]||(e[3]=t=>l.value.author.lastName=t),type:"text",class:"form-control"},null,512),[[a,l.value.author.lastName]])])]),o("div",h,[e[11]||(e[11]=o("label",{class:"form-label"},"Genre",-1)),r(o("input",{"onUpdate:modelValue":e[4]||(e[4]=t=>l.value.genre=t),type:"text",class:"form-control"},null,512),[[a,l.value.genre]])]),o("div",A,[e[12]||(e[12]=o("label",{class:"form-label"},"Année de publication",-1)),r(o("input",{"onUpdate:modelValue":e[5]||(e[5]=t=>l.value.publicationYear=t),type:"number",class:"form-control"},null,512),[[a,l.value.publicationYear]])]),o("div",L,[e[13]||(e[13]=o("label",{class:"form-label"},"URL de l’image de couverture",-1)),r(o("input",{"onUpdate:modelValue":e[6]||(e[6]=t=>l.value.coverUri=t),type:"url",class:"form-control"},null,512),[[a,l.value.coverUri]])]),e[15]||(e[15]=o("button",{type:"submit",class:"btn btn-primary"},"Enregistrer les modifications",-1)),g(f,{to:"/admin/books",class:"btn btn-secondary ms-2"},{default:U(()=>e[14]||(e[14]=[V("Annuler")])),_:1,__:[14]})],32))])}}};export{I as default};
