import{r as h,o as v,c as l,a as t,u as m,b as _,F as f,d as k,e as o,t as a}from"./index-BRY3hGxw.js";const y={class:"container mt-4"},g={class:"d-flex justify-content-end mb-3"},C={key:0,class:"alert alert-info"},E={key:1,class:"table table-bordered table-hover"},A=["onClick"],B=["onClick"],w={__name:"AdminBookList",setup(L){const r=h([]),u=h(!0),i=_();v(async()=>{try{const s=await fetch("http://localhost:3000/books?perPage=50");return r.value=await s.json(),r}catch(s){console.error("Erreur lors du chargement des livres :",s)}finally{u.value=!1}});async function p(s){if(confirm("Voulez-vous vraiment supprimer ce livre ?"))try{await fetch(`http://localhost:3000/books/${s}`,{method:"DELETE"}),r.value=r.value.filter(e=>e._id!==s)}catch(e){console.error("Erreur lors de la suppression :",e)}}return(s,e)=>(o(),l("div",y,[e[2]||(e[2]=t("h2",{class:"text-center mb-4"},"📋 Gestion des Livres",-1)),t("div",g,[t("button",{class:"btn btn-success",onClick:e[0]||(e[0]=n=>m(i).push("/admin/books/create"))}," ➕ Ajouter un livre ")]),u.value?(o(),l("div",C,"Chargement...")):(o(),l("table",E,[e[1]||(e[1]=t("thead",{class:"table-dark"},[t("tr",null,[t("th",null,"ID"),t("th",null,"Titre"),t("th",null,"Auteur"),t("th",null,"Année"),t("th",null,"Actions")])],-1)),t("tbody",null,[(o(!0),l(f,null,k(r.value,n=>{var c,d;return o(),l("tr",{key:n._id},[t("td",null,a(n._id),1),t("td",null,a(n.title),1),t("td",null,a(((c=n.author)==null?void 0:c.firstName)||"autheur inconnu")+" "+a(((d=n.author)==null?void 0:d.lastName)||""),1),t("td",null,a(n.publicationYear),1),t("td",null,[t("button",{class:"btn btn-warning btn-sm me-2",onClick:b=>m(i).push(`/admin/books/${n._id}/update`)}," ✏️ Modifier ",8,A),t("button",{class:"btn btn-danger btn-sm",onClick:b=>p(n._id)}," 🗑️ Supprimer ",8,B)])])}),128))])]))]))}};export{w as default};
